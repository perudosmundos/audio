# –û—Ç—á–µ—Ç –æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–∏—Å—Ç–µ–º—ã –∏—Å—Ç–æ—Ä–∏–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–î–∞—Ç–∞:** 19 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£—Å–ø–µ—à–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ

## üéØ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è EditorAuthProvider –≤ App.jsx
- –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `EditorAuthProvider` –∏ `EditHistoryAdminPage`
- –û–±–µ—Ä–Ω—É—Ç –≤–µ—Å—å —Ä–æ—É—Ç–µ—Ä –≤ `EditorAuthProvider`
- –î–æ–±–∞–≤–ª–µ–Ω –º–∞—Ä—à—Ä—É—Ç `/edit` –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –∏—Å—Ç–æ—Ä–∏–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

#### Visual Editor (edit-mode-script.js)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ `checkEditorAuth()`
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏—é —á–µ—Ä–µ–∑ `saveEditToHistory()`
- ‚úÖ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

#### Segment Editing (useSegmentEditing.js)
- ‚úÖ –•—É–∫ `useEditorAuth()` –ø–æ–¥–∫–ª—é—á–µ–Ω
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å —Å–µ–≥–º–µ–Ω—Ç–∞–º–∏:
  - Update (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞)
  - Split (—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ)
  - Merge (–æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ)
  - Delete (—É–¥–∞–ª–µ–Ω–∏–µ)
  - Insert (–≤—Å—Ç–∞–≤–∫–∞)

#### Speaker Operations (useSpeakerAssignment.js)
- ‚úÖ –•—É–∫ `useEditorAuth()` –ø–æ–¥–∫–ª—é—á–µ–Ω
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —Å–ø–∏–∫–µ—Ä–æ–≤
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö 3 —Ç–∏–ø–æ–≤ –æ–ø–µ—Ä–∞—Ü–∏–π —Å–æ —Å–ø–∏–∫–µ—Ä–∞–º–∏:
  - Global Rename (–≥–ª–æ–±–∞–ª—å–Ω–æ–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ)
  - Reassign (–ø–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ)
  - Create New (—Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ)
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤

#### Simple Speaker Change (QuestionBlock.jsx)
- ‚úÖ –•—É–∫ `useEditorAuth()` –ø–æ–¥–∫–ª—é—á–µ–Ω
- ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `handleSetSegmentSpeaker` –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–ø–∏–∫–µ—Ä–∞ —á–µ—Ä–µ–∑ dropdown

### 3. ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã UI

#### –°–æ–∑–¥–∞–Ω—ã –∏ –¥–æ—Å—Ç—É–ø–Ω—ã:
- `EditorAuthModal.jsx` - –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
- `UserEditHistory.jsx` - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏—Å—Ç–æ—Ä–∏–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `EditHistoryAdminPage.jsx` - –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –Ω–∞ `/edit`
- `EditHistoryTester.jsx` - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

### 4. ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

#### –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã:
- `20251019_create_edit_history_system.sql` - —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
- `20251019_setup_rls_policies.sql` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–ª–∏—Ç–∏–∫ (RLS –æ—Ç–∫–ª—é—á–µ–Ω –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

#### –¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã:
- ‚úÖ `user_editors` - —Ä–µ–¥–∞–∫—Ç–æ—Ä—ã (email, name)
- ‚úÖ `edit_history` - –∏—Å—Ç–æ—Ä–∏—è –ø—Ä–∞–≤–æ–∫
- ‚úÖ `edit_history_with_editor` - view —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π

#### –§—É–Ω–∫—Ü–∏–∏:
- ‚úÖ `get_or_create_editor()` - –ø–æ–ª—É—á–∏—Ç—å –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
- ‚úÖ `rollback_edit()` - –æ—Ç–∫–∞—Ç –ø—Ä–∞–≤–æ–∫

### 5. ‚úÖ –°–µ—Ä–≤–∏—Å—ã

#### editHistoryService.js:
- ‚úÖ `saveEditToHistory()` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏—é
- ‚úÖ `getEditorHistory()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
- ‚úÖ `getAllEditHistory()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ–π –∏—Å—Ç–æ—Ä–∏–∏ (–∞–¥–º–∏–Ω)
- ‚úÖ `rollbackEdit()` - –æ—Ç–∫–∞—Ç –ø—Ä–∞–≤–∫–∏
- ‚úÖ `getEditStats()` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- ‚úÖ `getAllEditors()` - —Å–ø–∏—Å–æ–∫ —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–≤
- ‚úÖ `applyRollback()` - –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –æ—Ç–∫–∞—Ç–∞

## üìä –ü–æ–∫—Ä—ã—Ç–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –í—Å–µ 10 —Ç–∏–ø–æ–≤ –æ–ø–µ—Ä–∞—Ü–∏–π –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã:

1. **Visual UI editing** (Ctrl+click) - ‚úÖ
2. **Segment Update** - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ - ‚úÖ
3. **Segment Split** - —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–µ–≥–º–µ–Ω—Ç–∞ - ‚úÖ
4. **Segment Merge** - –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Å–µ–≥–º–µ–Ω—Ç–æ–≤ - ‚úÖ
5. **Segment Delete** - —É–¥–∞–ª–µ–Ω–∏–µ —Å–µ–≥–º–µ–Ω—Ç–∞ - ‚úÖ
6. **Segment Insert** - –≤—Å—Ç–∞–≤–∫–∞ –Ω–æ–≤–æ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞ - ‚úÖ
7. **Simple Speaker Change** - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ dropdown - ‚úÖ
8. **Speaker Global Rename** - –≥–ª–æ–±–∞–ª—å–Ω–æ–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ - ‚úÖ
9. **Speaker Reassign** - –ø–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ - ‚úÖ
10. **Speaker Create New** - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–ø–∏–∫–µ—Ä–∞ - ‚úÖ

## üîß –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ù–µ–∫—Ä–∏—Ç–∏—á–Ω—ã–µ:
- ‚ö†Ô∏è –î—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –∫–ª—é—á–∏ –≤ `src/lib/locales/ru.json` (–Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–∞–±–æ—Ç—É —Å–∏—Å—Ç–µ–º—ã –∏—Å—Ç–æ—Ä–∏–∏)
- üìù –¢—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –æ—á–∏—Å—Ç–∫–∏ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–≤ (email + name, —Ç–æ–ª—å–∫–æ –ª–∞—Ç–∏–Ω–∏—Ü–∞)
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –ø—Ä–∞–≤–æ–∫ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –≤ Settings ‚Üí Edit History
- –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –Ω–∞ `/edit` —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –∏ –ø–æ–∏—Å–∫–æ–º
- –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π (rollback)

### üìç –î–æ—Å—Ç—É–ø –∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º:
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** Settings ‚Üí Edit History ‚Üí Login
- **–ò—Å—Ç–æ—Ä–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:** Settings ‚Üí Edit History (–ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞)
- **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å:** http://localhost:5173/edit

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–æ–∑–¥–∞–Ω—ã markdown —Ñ–∞–π–ª—ã:
- `SPEAKER_OPERATIONS_INTEGRATION.md` - –¥–µ—Ç–∞–ª–∏ –æ–ø–µ—Ä–∞—Ü–∏–π —Å–æ —Å–ø–∏–∫–µ—Ä–∞–º–∏
- `ALL_EDIT_TYPES_INTEGRATION.md` - –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- `SEGMENT_EDITING_INTEGRATION.md` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–µ–≥–º–µ–Ω—Ç–æ–≤

## üéì –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
```
1. –û—Ç–∫—Ä—ã—Ç—å Settings (–∏–∫–æ–Ω–∫–∞ —à–µ—Å—Ç–µ—Ä–µ–Ω–∫–∏ –≤ —Ñ—É—Ç–µ—Ä–µ)
2. –ü–µ—Ä–µ–π—Ç–∏ –≤ "–ò—Å—Ç–æ—Ä–∏—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è"
3. –ù–∞–∂–∞—Ç—å "Login as Editor"
4. –í–≤–µ—Å—Ç–∏ email (–ª–∞—Ç–∏–Ω–∏—Ü–∞) –∏ –∏–º—è (–ª–∞—Ç–∏–Ω–∏—Ü–∞)
5. –ù–∞–∂–∞—Ç—å "Authenticate"
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–∞–≤–æ–∫
```
1. –ü–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç —Å–µ–≥–º–µ–Ω—Ç–∞
2. –ò–∑–º–µ–Ω–∏—Ç—å —Å–ø–∏–∫–µ—Ä–∞ (—á–µ—Ä–µ–∑ dropdown –∏–ª–∏ –¥–∏–∞–ª–æ–≥)
3. –†–∞–∑–¥–µ–ª–∏—Ç—å/–æ–±—ä–µ–¥–∏–Ω–∏—Ç—å —Å–µ–≥–º–µ–Ω—Ç—ã
4. –û—Ç–∫—Ä—ã—Ç—å Settings ‚Üí Edit History
5. –£–≤–∏–¥–µ—Ç—å –≤—Å–µ —Å–≤–æ–∏ –ø—Ä–∞–≤–∫–∏ —Å –¥–µ—Ç–∞–ª—è–º–∏
```

### 3. –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
```
1. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ /edit
2. –£–≤–∏–¥–µ—Ç—å –≤—Å–µ –ø—Ä–∞–≤–∫–∏ –≤—Å–µ—Ö —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–≤
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã (–ø–æ —Ä–µ–¥–∞–∫—Ç–æ—Ä—É, —Ç–∏–ø—É, —Ü–µ–ª–µ–≤–æ–º—É –æ–±—ä–µ–∫—Ç—É)
4. –û—Ç–∫–∞—Ç–∏—Ç—å –ª—é–±—É—é –ø—Ä–∞–≤–∫—É –∫–Ω–æ–ø–∫–æ–π "Rollback"
```

## ‚ú® –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ!

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
1. –û—á–∏—Å—Ç–∏—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã –≤ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ 10 —Ç–∏–ø–æ–≤ –æ–ø–µ—Ä–∞—Ü–∏–π
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–∫–∞—Ç –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
4. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è production
