# –°–≤–æ–¥–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π: –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ VK Cloud

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å VK Cloud
- **–§–∞–π–ª**: `src/lib/vkCloudService.js`
- **–§—É–Ω–∫—Ü–∏–∏**: –∑–∞–≥—Ä—É–∑–∫–∞, —É–¥–∞–ª–µ–Ω–∏–µ, –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: S3-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π API, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ path-style URLs

### 2. –°–æ–∑–¥–∞–Ω —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
- **–§–∞–π–ª**: `src/lib/storageService.js`
- **–§—É–Ω–∫—Ü–∏–∏**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É R2 –∏ VK Cloud
- **Fallback**: –ø—Ä–∏ –æ—à–∏–±–∫–µ VK Cloud –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ R2

### 3. –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **AudioUploader.jsx**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç storageService –≤–º–µ—Å—Ç–æ r2Service
- **fileProcessor.js**: —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤
- **ManagePage.jsx**: —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ storageService
- **ManageEpisodesPage.jsx**: —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ storageService
- **useEpisodeData.js**: –ø–æ–ª—É—á–µ–Ω–∏–µ URL —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ storageService

### 4. –î–æ–±–∞–≤–ª–µ–Ω—ã –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
- **–ê–Ω–≥–ª–∏–π—Å–∫–∏–π**: `errorUploadingToVKCloud`, `errorDeletingVKCloudFile`, `uploadToVKCloudSuccess`
- **–†—É—Å—Å–∫–∏–π**: `errorUploadingToVKCloud`, `errorDeletingVKCloudFile`, `uploadToVKCloudSuccess`
- **–ò—Å–ø–∞–Ω—Å–∫–∏–π**: `errorUploadingToVKCloud`, `errorDeletingVKCloudFile`, `uploadToVKCloudSuccess`

### 5. –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **VK_CLOUD_SETUP.md**: –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
- **MIGRATION_SUMMARY.md**: –¥–∞–Ω–Ω–∞—è —Å–≤–æ–¥–∫–∞

## üîß –¢—Ä–µ–±—É–µ–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Supabase
–î–æ–±–∞–≤–∏—Ç—å –≤ Edge Function `get-env-variables`:
```bash
VK_ACCESS_KEY_ID=your_access_key_id
VK_SECRET_KEY=your_secret_key
VK_BUCKET_NAME=dosmundos-audio
VK_ENDPOINT=https://hb.bizmrg.com
VK_REGION=ru-msk
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∫–µ—Ç–∞ –≤ VK Cloud
- –°–æ–∑–¥–∞—Ç—å –±–∞–∫–µ—Ç —Å –∏–º–µ–Ω–µ–º `dosmundos-audio`
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø
- –ü–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á–∏

### 3. –ê–∫—Ç–∏–≤–∞—Ü–∏—è VK Cloud (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
–í —Ñ–∞–π–ª–µ `src/lib/storageService.js` –∏–∑–º–µ–Ω–∏—Ç—å:
```javascript
const DEFAULT_STORAGE = 'vkCloud'; // –£–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
```

## üîÑ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- ‚úÖ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã –≤ R2 –ø—Ä–æ–¥–æ–ª–∂–∞—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏
- ‚úÖ Fallback –Ω–∞ R2 –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö VK Cloud
- ‚úÖ –ü–æ–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è –±–ª–∏–∑–æ—Å—Ç—å**: VK Cloud —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω –≤ –†–æ—Å—Å–∏–∏
2. **–°—Ç–æ–∏–º–æ—Å—Ç—å**: –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –±–æ–ª–µ–µ –≤—ã–≥–æ–¥–Ω—ã–µ —Ç–∞—Ä–∏—Ñ—ã
3. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ R2
4. **–ì–∏–±–∫–æ—Å—Ç—å**: –ª–µ–≥–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ö—Ä–∞–Ω–∏–ª–∏—â–∞–º–∏

## üìä –°—Ç–∞—Ç—É—Å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

- ‚úÖ –ö–æ–¥ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- ‚úÖ –ö–æ–º–ø–∏–ª—è—Ü–∏—è –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ
- ‚è≥ –¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚è≥ –¢—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞–Ω–∏–µ –±–∞–∫–µ—Ç–∞ –≤ VK Cloud

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Supabase
2. –°–æ–∑–¥–∞—Ç—å –±–∞–∫–µ—Ç –≤ VK Cloud
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–æ–≤
4. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å CORS –≤ VK Cloud 